{"ast":null,"code":"var _jsxFileName = \"/home/pawan/CF-KNOCKOUT/client/src/components/p4/Timer.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport axios from \"axios\";\nimport '../p3/Room.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Timer = _ref => {\n  _s();\n\n  let {\n    duration,\n    roomid\n  } = _ref;\n  const history = useHistory();\n  let [[hrs, mins, secs], setTime] = useState(returnTime());\n\n  function returnTime() {\n    let currentTime = new Date().getTime();\n    var absolute_delta = duration - currentTime;\n    let hrs = 0,\n        mins = 0,\n        secs = 0;\n\n    if (absolute_delta >= 0) {\n      var delta = Math.floor(Math.abs(duration - currentTime) / 1000);\n      hrs = Math.floor(delta / 3600) % 24;\n      delta -= hrs * 3600;\n      mins = Math.floor(delta / 60) % 60;\n      delta -= mins * 60;\n      secs = delta % 60;\n    }\n\n    return [hrs, mins, secs];\n  }\n\n  const tick = () => {\n    setTime(returnTime);\n  };\n\n  useEffect(() => {\n    let timerId;\n\n    if (hrs > 0 || mins > 0 || secs > 0) {\n      timerId = setInterval(() => tick(), 1000);\n    } else {\n      if (hrs === 0 && mins === 0 && secs === 0) {\n        axios.post(\"/api/round/finished\", {\n          roomid\n        }).then(res => {\n          history.replace(`/standings/${roomid}`, {\n            params: roomid\n          });\n        }).catch(err => console.log(err));\n      }\n    }\n\n    return () => clearInterval(timerId);\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container bg-warning text-center border border-black border-2 rounded px-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-responsive fw-bold border-bottom border-dark bg-info py-1\",\n        children: \"Round Ends In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timer-responsive\",\n        children: `${hrs} :\n                        ${mins} :\n                        ${secs}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(Timer, \"7pcxORPmV7i/jtnCg7/gzx/d13o=\", false, function () {\n  return [useHistory];\n});\n\n_c = Timer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"names":["React","useState","useEffect","useHistory","axios","Timer","duration","roomid","history","hrs","mins","secs","setTime","returnTime","currentTime","Date","getTime","absolute_delta","delta","Math","floor","abs","tick","timerId","setInterval","post","then","res","replace","params","catch","err","console","log","clearInterval"],"sources":["/home/pawan/CF-KNOCKOUT/client/src/components/p4/Timer.js"],"sourcesContent":["import React from 'react'\nimport { useState, useEffect } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport axios from \"axios\"\nimport '../p3/Room.css'\n\nexport const Timer = ({ duration , roomid}) => {\n    const history = useHistory();\n    let [[hrs, mins, secs], setTime] = useState(returnTime());\n    function returnTime(){\n        let currentTime = new Date().getTime();\n        var absolute_delta = duration - currentTime;\n        let hrs=0,mins=0,secs=0;\n        if(absolute_delta >= 0){\n            var delta = Math.floor(Math.abs(duration - currentTime) / 1000);\n\n            hrs = Math.floor(delta / 3600) % 24;\n            delta -= hrs * 3600;\n\n            mins = Math.floor(delta / 60) % 60;\n            delta -= mins * 60;\n\n            secs = delta % 60;\n        }\n        return [hrs, mins, secs]\n    }\n    const tick = () => {\n            setTime(returnTime)\n        }    \n\n    useEffect(() => {\n        let timerId;\n        if (hrs>0 || mins>0 || secs>0) {\n            timerId = setInterval(() => tick(), 1000);\n        }\n        else{\n            if (hrs === 0 && mins === 0 && secs === 0) {\n                axios.post(\"/api/round/finished\", {\n                    roomid\n                })\n                .then((res) => {\n                    history.replace(`/standings/${roomid}`, { params: roomid }\n                )})\n                .catch(err => console.log(err))\n            }\n        }\n\n        return () => clearInterval(timerId);\n    });\n\n    return (\n        <>\n            <div className=\"container bg-warning text-center border border-black border-2 rounded px-0\">\n                <div className=\"text-responsive fw-bold border-bottom border-dark bg-info py-1\">Round Ends In</div>\n                <div className=\"timer-responsive\">\n                    {\n                        `${hrs} :\n                        ${mins} :\n                        ${secs}`\n                    }\n                </div>\n            </div>\n        </>\n    )\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,gBAAP;;;AAEA,OAAO,MAAMC,KAAK,GAAG,QAA0B;EAAA;;EAAA,IAAzB;IAAEC,QAAF;IAAaC;EAAb,CAAyB;EAC3C,MAAMC,OAAO,GAAGL,UAAU,EAA1B;EACA,IAAI,CAAC,CAACM,GAAD,EAAMC,IAAN,EAAYC,IAAZ,CAAD,EAAoBC,OAApB,IAA+BX,QAAQ,CAACY,UAAU,EAAX,CAA3C;;EACA,SAASA,UAAT,GAAqB;IACjB,IAAIC,WAAW,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAlB;IACA,IAAIC,cAAc,GAAGX,QAAQ,GAAGQ,WAAhC;IACA,IAAIL,GAAG,GAAC,CAAR;IAAA,IAAUC,IAAI,GAAC,CAAf;IAAA,IAAiBC,IAAI,GAAC,CAAtB;;IACA,IAAGM,cAAc,IAAI,CAArB,EAAuB;MACnB,IAAIC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,GAAL,CAASf,QAAQ,GAAGQ,WAApB,IAAmC,IAA9C,CAAZ;MAEAL,GAAG,GAAGU,IAAI,CAACC,KAAL,CAAWF,KAAK,GAAG,IAAnB,IAA2B,EAAjC;MACAA,KAAK,IAAIT,GAAG,GAAG,IAAf;MAEAC,IAAI,GAAGS,IAAI,CAACC,KAAL,CAAWF,KAAK,GAAG,EAAnB,IAAyB,EAAhC;MACAA,KAAK,IAAIR,IAAI,GAAG,EAAhB;MAEAC,IAAI,GAAGO,KAAK,GAAG,EAAf;IACH;;IACD,OAAO,CAACT,GAAD,EAAMC,IAAN,EAAYC,IAAZ,CAAP;EACH;;EACD,MAAMW,IAAI,GAAG,MAAM;IACXV,OAAO,CAACC,UAAD,CAAP;EACH,CAFL;;EAIAX,SAAS,CAAC,MAAM;IACZ,IAAIqB,OAAJ;;IACA,IAAId,GAAG,GAAC,CAAJ,IAASC,IAAI,GAAC,CAAd,IAAmBC,IAAI,GAAC,CAA5B,EAA+B;MAC3BY,OAAO,GAAGC,WAAW,CAAC,MAAMF,IAAI,EAAX,EAAe,IAAf,CAArB;IACH,CAFD,MAGI;MACA,IAAIb,GAAG,KAAK,CAAR,IAAaC,IAAI,KAAK,CAAtB,IAA2BC,IAAI,KAAK,CAAxC,EAA2C;QACvCP,KAAK,CAACqB,IAAN,CAAW,qBAAX,EAAkC;UAC9BlB;QAD8B,CAAlC,EAGCmB,IAHD,CAGOC,GAAD,IAAS;UACXnB,OAAO,CAACoB,OAAR,CAAiB,cAAarB,MAAO,EAArC,EAAwC;YAAEsB,MAAM,EAAEtB;UAAV,CAAxC;QACF,CALF,EAMCuB,KAND,CAMOC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CANd;MAOH;IACJ;;IAED,OAAO,MAAMG,aAAa,CAACX,OAAD,CAA1B;EACH,CAlBQ,CAAT;EAoBA,oBACI;IAAA,uBACI;MAAK,SAAS,EAAC,4EAAf;MAAA,wBACI;QAAK,SAAS,EAAC,gEAAf;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAK,SAAS,EAAC,kBAAf;QAAA,UAES,GAAEd,GAAI;AAC/B,0BAA0BC,IAAK;AAC/B,0BAA0BC,IAAK;MAJf;QAAA;QAAA;QAAA;MAAA,QAFJ;IAAA;MAAA;MAAA;MAAA;IAAA;EADJ,iBADJ;AAcH,CA1DM;;GAAMN,K;UACOF,U;;;KADPE,K"},"metadata":{},"sourceType":"module"}